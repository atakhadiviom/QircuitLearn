:root {
  --primary: #4f46e5;
  --primary-hover: #4338ca;
  --bg: #f3f4f6;
  --surface: #ffffff;
  --text-main: #111827;
  --text-muted: #6b7280;
  --border: #e5e7eb;
  --sidebar-bg: #1f2937;
  --sidebar-text: #e5e7eb;
  --sidebar-hover: #374151;
  --accent: #10b981;
  --danger: #ef4444;
  --wire-color: #9ca3af;
}

body, html {
  margin: 0;
  padding: 0;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  height: 100%;
  background: var(--bg);
  color: var(--text-main);
}

* { box-sizing: border-box; }

/* Layout */
.app-layout {
  display: flex;
  height: 100vh;
  flex-direction: column;
}

@media (min-width: 768px) {
  .app-layout {
    flex-direction: row;
  }
}

/* Sidebar */
.sidebar {
  width: 100%;
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-right: none;
  border-bottom: 1px solid #111827;
  max-height: 200px; /* Limit height on mobile */
}

@media (min-width: 768px) {
  .sidebar {
    width: 260px;
    height: 100%;
    border-right: 1px solid #111827;
    border-bottom: none;
    max-height: none;
  }
}


.sidebar .brand {
  padding: 20px;
  font-size: 1.5rem;
  font-weight: 700;
  color: white;
  letter-spacing: -0.025em;
  border-bottom: 1px solid #374151;
}
.sidebar .brand a { color: inherit; text-decoration: none; }

.sidebar .course-title {
  padding: 16px 20px;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #9ca3af;
  font-weight: 600;
}

.lesson-list {
  list-style: none;
  padding: 0;
  margin: 0;
  overflow-y: auto;
  flex: 1;
}

.lesson-list li a {
  display: flex;
  padding: 12px 20px;
  color: #d1d5db;
  text-decoration: none;
  border-left: 3px solid transparent;
  gap: 12px;
  align-items: center;
  transition: background 0.2s, color 0.2s;
}

.lesson-list li.active a {
  background: var(--sidebar-hover);
  color: white;
  border-left-color: var(--accent);
}

.lesson-list li a:hover {
  background: var(--sidebar-hover);
  color: white;
}

.lesson-list .num {
  font-size: 0.8rem;
  background: #374151;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  color: #9ca3af;
}

.lesson-list li.active .num {
  background: var(--accent);
  color: white;
}

/* Main Content */
.main-content {
  flex: 1;
  display: flex;
  overflow: hidden;
  flex-direction: column; /* On mobile maybe? */
}

@media (min-width: 768px) {
  .main-content {
    flex-direction: row;
  }
}

/* Lesson Pane (Prose) */
.lesson-pane {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
  background: var(--surface);
  border-right: 1px solid var(--border);
  max-width: 650px;
}

.lesson-pane h1 {
  margin-top: 0;
  font-size: 2rem;
  font-weight: 800;
  letter-spacing: -0.025em;
  margin-bottom: 24px;
  color: #111827;
}

.lesson-nav {
  display: flex;
  justify-content: space-between;
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid var(--border);
}

.prose {
  line-height: 1.7;
  color: #374151;
  font-size: 1.05rem;
}

.prose h2 { margin-top: 2em; color: #111827; }
.prose p { margin-bottom: 1.5em; }
.prose code {
  background: #f3f4f6;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Fira Code', monospace;
  font-size: 0.9em;
  color: #c026d3;
}
.prose pre {
  background: #1e293b;
  color: #e2e8f0;
  padding: 16px;
  border-radius: 8px;
  overflow-x: auto;
  font-size: 0.9em;
}

/* Editor Pane */
.editor-pane {
  flex: 1;
  padding: 24px;
  display: flex;
  flex-direction: column;
  background: #f9fafb;
  overflow-y: auto;
}

.toolbar {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
  background: var(--surface);
  padding: 12px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  border: 1px solid var(--border);
}

.control-group {
  display: flex;
  gap: 12px;
  align-items: center;
}
.control-group label {
  font-weight: 600;
  color: #4b5563;
  font-size: 0.9rem;
}

/* Gate Palette */
.gate-palette {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  background: var(--surface);
  padding: 16px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  border: 1px solid var(--border);
  flex-wrap: wrap;
}

.gate-btn {
  width: 48px;
  height: 48px;
  background: white;
  border: 1px solid var(--border);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  font-weight: 700;
  user-select: none;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  transition: all 0.2s;
  color: var(--text-main);
  position: relative;
}

.gate-btn:hover {
  border-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.gate-btn:active {
  cursor: grabbing;
}

/* Circuit Editor Grid */
.circuit-container {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
  overflow-x: auto;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  min-height: 300px;
  display: flex;
  flex-direction: column;
}

.circuit-grid {
  display: inline-flex;
  flex-direction: column;
  min-width: 100%;
  position: relative;
}

.circuit-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5; /* Above wires/zones (z=0/1), below gates (z=2) if we want lines behind gates */
  /* Actually, placed-gate is z=2. If we want lines on top of wires but below gates, z=1 is enough? 
     Let's use z-index 10 and ensure lines are drawn nicely. 
     Actually, standard CNOT lines are usually "behind" the target gate symbol but "connect" to it.
     If the target gate is opaque, the line behind is fine.
     But the control dot needs to be visible.
     If I draw the control dot in SVG, it should be on top.
  */
  z-index: 10; 
}

.cnot-line {
  stroke: var(--text-main);
  stroke-width: 2px;
}

.cnot-control {
  fill: var(--text-main);
}

.qubit-row {
  display: flex;
  align-items: center;
  height: 60px;
  position: relative;
}

.qubit-label {
  width: 60px;
  font-weight: 700;
  color: #6b7280;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: monospace;
  font-size: 1.1rem;
  flex-shrink: 0;
  border-right: 1px solid var(--border);
  background: #f9fafb;
  height: 100%;
}

.wire-container {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  padding: 0 20px;
  background-image: linear-gradient(to right, #f3f4f6 1px, transparent 1px);
  background-size: 50px 100%; /* Grid lines */
}

/* The horizontal wire line */
.wire-line {
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 2px;
  background: var(--wire-color);
  z-index: 0;
}

/* Drop slots */
.drop-zone {
  width: 50px; /* Match background size */
  height: 40px;
  margin: 0;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  /* border: 1px dashed transparent; */
  transition: background 0.1s;
}

.dragging-active .drop-zone {
  border: 1px dashed #cbd5e1;
}

.drop-zone.drag-over {
  background: rgba(79, 70, 229, 0.1);
  border-radius: 4px;
}

.placed-gate {
  width: 40px;
  height: 40px;
  background: var(--primary);
  color: white;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.85rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  cursor: pointer;
  z-index: 2;
  user-select: none;
}

.placed-gate.control {
  background: var(--text-main);
  border-radius: 50%;
  width: 16px;
  height: 16px;
}

.placed-gate.control-line {
  /* Vertical line for CNOT will be handled via JS/SVG or absolute div */
  position: absolute;
  width: 2px;
  background: var(--text-main);
  left: 50%;
  transform: translateX(-50%);
  z-index: 1;
}

/* Output Console */
.output-console {
  background: #111827;
  color: #10b981;
  padding: 20px;
  border-radius: 8px;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  white-space: pre-wrap;
  min-height: 150px;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
  font-size: 0.9rem;
}

/* Buttons */
.btn {
  padding: 8px 16px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: white;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  transition: all 0.2s;
  color: #374151;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn:hover {
  background: #f9fafb;
  border-color: #d1d5db;
  text-decoration: none;
}

.btn.primary {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.btn.primary:hover {
  background: var(--primary-hover);
}

.btn.danger {
  color: var(--danger);
  border-color: #fee2e2;
  background: #fef2f2;
}
.btn.danger:hover {
  background: #fee2e2;
}

.btn.sm {
  padding: 4px 10px;
  font-size: 0.8rem;
}

.hidden { display: none; }

/* LANDING PAGE STYLES */

.landing-page {
  background: #ffffff;
  color: #1f2937;
  height: auto;
  overflow-y: auto;
}

.container {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 20px;
}

/* Nav */
.landing-nav {
  padding: 20px 0;
  border-bottom: 1px solid #f3f4f6;
  position: sticky;
  top: 0;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(8px);
  z-index: 50;
}

.landing-nav .nav-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.landing-nav .brand {
  font-weight: 800;
  font-size: 1.5rem;
  color: var(--primary);
}

.landing-nav .nav-links {
  display: flex;
  gap: 16px;
}

/* Hero */
.hero {
  padding: 100px 0 80px;
  text-align: center;
  background: radial-gradient(circle at 50% 50%, rgba(79, 70, 229, 0.05) 0%, rgba(255, 255, 255, 0) 50%);
}

.hero h1 {
  font-size: 3.5rem;
  line-height: 1.1;
  font-weight: 800;
  margin-bottom: 24px;
  letter-spacing: -0.03em;
  color: #111827;
}

.hero .highlight {
  color: var(--primary);
  position: relative;
  display: inline-block;
}

.hero .subtitle {
  font-size: 1.25rem;
  color: #4b5563;
  max-width: 600px;
  margin: 0 auto 40px;
  line-height: 1.6;
}

.cta-group {
  display: flex;
  gap: 16px;
  justify-content: center;
}

.btn.lg {
  padding: 12px 24px;
  font-size: 1.1rem;
}

/* Features */
.features {
  padding: 80px 0;
  background: #f9fafb;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
}

.feature-card {
  background: white;
  padding: 32px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s;
}

.feature-card:hover {
  transform: translateY(-4px);
}

.feature-card .icon {
  font-size: 2rem;
  margin-bottom: 16px;
  background: #e0e7ff;
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
}

.feature-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: #111827;
}

.feature-card p {
  color: #6b7280;
  line-height: 1.6;
}

/* Course List */
.course-list-section {
  padding: 80px 0;
}

.section-title {
  font-size: 2rem;
  font-weight: 800;
  margin-bottom: 40px;
  text-align: center;
}

.course-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
  justify-content: center;
}

.course-card {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 32px;
  background: white;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.course-card h3 {
  font-size: 1.5rem;
  font-weight: 700;
  margin-top: 0;
  margin-bottom: 12px;
}

.course-card p {
  color: #6b7280;
  margin-bottom: 24px;
  line-height: 1.6;
  flex: 1;
}

/* Footer */
.landing-footer {
  padding: 40px 0;
  text-align: center;
  color: #6b7280;
  border-top: 1px solid var(--border);
  font-size: 0.9rem;
}

/* Mobile Adjustments */
@media (max-width: 768px) {
  .hero h1 { font-size: 2.5rem; }
  .cta-group { flex-direction: column; }
  .btn.lg { width: 100%; text-align: center; }
}
