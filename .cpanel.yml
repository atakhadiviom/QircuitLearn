---
deployment:
  tasks:
    - export DEPLOYPATH=/home/qircuitc/qircuitapp
    - /bin/mkdir -p $DEPLOYPATH/tmp
    - /bin/rsync -a --delete app/ $DEPLOYPATH/app/
    - /bin/rsync -a --delete static/ $DEPLOYPATH/static/
    - /bin/rsync -a --delete templates/ $DEPLOYPATH/templates/
    - /bin/cp passenger_wsgi.py $DEPLOYPATH
    - /bin/cp requirements.txt $DEPLOYPATH
    - /bin/cp seed.py $DEPLOYPATH
    - /bin/cp DEPLOYMENT.md $DEPLOYPATH
    - /home/qircuitc/virtualenv/qircuitapp/3.11/bin/pip install -r $DEPLOYPATH/requirements.txt
    - /home/qircuitc/virtualenv/qircuitapp/3.11/bin/python $DEPLOYPATH/seed.py
    - /bin/touch $DEPLOYPATH/tmp/restart.txt
